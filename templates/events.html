{% extends 'base.html' %}

{% block title %}Upcoming Events - IT Department{% endblock %}

{% block content %}
<style>
    /* Force white background for the entire page body on events page */
    body {
        background-color: #FFFFFF !important;
    }

    .page-header-bg {
        margin-bottom: 0 !important;
        /* Remove gap between header and content */
    }

    /* This matches your Study Materials & Details Header style */
    .page-header {
        background: linear-gradient(135deg, var(--gradient-start, #2575fc) 0%, var(--gradient-end, #cba9f0) 100%);
        color: rgb(255, 255, 255);
        padding: 3rem 0;
        margin: -1rem -1rem 2rem -1rem;
        border-radius: 0 0 15px 15px;
    }

    .hover-card {
        transition: transform 0.3s, box-shadow 0.3s;
        background: var(--card-bg, white);
    }

    .hover-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 15px 35px var(--card-shadow, rgba(0, 0, 0, 0.15)) !important;
    }

    .event-image {
        height: 200px;
        object-fit: cover;
        transition: transform 0.5s ease;
    }

    .hover-card:hover .event-image {
        transform: scale(1.05);
    }

    .card-img-wrapper {
        overflow: hidden;
    }

    .btn-register {
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        border: none;
        color: white;
        font-weight: 600;
        padding: 10px 25px;
        border-radius: 50px;
        transition: all 0.3s ease;
    }

    .btn-register:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(40, 167, 69, 0.4);
        color: white;
    }

    .event-date-badge {
        position: absolute;
        top: 15px;
        right: 15px;
        background: white;
        color: var(--gradient-start, #2575fc);
        padding: 8px 15px;
        border-radius: 50px;
        font-weight: 700;
        font-size: 0.85rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        z-index: 5;
    }

    hr{
        color: #5e0000;
        border-width: 2px;
        border-color: #800000;
    }

    @media (max-width: 992px) {
        .page-header-bg{
            padding-top: 180px;
        }
    }

</style>

<div class="page-header-bg text-center"
    style="background: #ffffff !important; color: #800000 !important; box-shadow: none !important; border-radius: 0 !important; border: none !important; outline: none !important;">
    <div class="container position-relative z-1">
        <h1 class="display-4 fw-bold mb-3" data-aos="fade-down" style="color: #800000;">Upcoming Events</h1>
        <p class="lead opacity-100 fw-bold" data-aos="fade-up" data-aos-delay="100">Workshops, seminars, and cultural
            activities.</p>
    </div>
    
</div>

<div class="container py-5 position-relative z-2">
    <div class="row">
        {% for event in events %}
        <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="{{ loop.index * 50 }}">
            <div class="card h-100 shadow border-0 hover-card position-relative"
                style="border-radius: 15px; overflow: hidden;">

                <!-- Date Badge -->
                <div class="event-date-badge">
                    <i class="bi bi-calendar-check me-1"></i>{{ event.event_date }}
                </div>

                <!-- Image -->
                <div class="card-img-wrapper">
                    {% if event.image_file %}
                    <a href="{{ url_for('static', filename='uploads/' + event.image_file) }}" target="_blank">
                        <img src="{{ url_for('static', filename='uploads/' + event.image_file) }}"
                            class="card-img-top event-image" alt="{{ event.title }}" loading="lazy">
                    </a>
                    {% else %}
                    <div class="bg-light d-flex align-items-center justify-content-center event-image">
                        <i class="bi bi-calendar-event text-secondary display-4"></i>
                    </div>
                    {% endif %}
                </div>

                <div class="card-body p-4">
                    <h4 class="card-title fw-bold mb-3">{{ event.title }}</h4>
                    <p class="card-text text-muted mb-4">{{ event.description[:120] }}{% if event.description|length >
                        120 %}...{% endif %}</p>

                    <hr class="my-3">

                    <div class="d-flex justify-content-between text-muted small mb-3">
                        <span><i class="bi bi-person-badge me-1"></i>{{ event.event_manager }}</span>
                        <span><i class="bi bi-telephone me-1"></i>{{ event.contact_number }}</span>
                    </div>

                    <!-- Register Button -->
                    <a href="{{ url_for('register_event', event_id=event.id) }}" class="btn btn-register w-100">
                        <i class="bi bi-pencil-square me-2"></i>Register Now
                    </a>
                </div>
            </div>
        </div>
        {% else %}
        <div class="col-12 text-center py-5">
            <div class="text-muted opacity-50 mb-3"><i class="bi bi-calendar-x display-1"></i></div>
            <h3>No upcoming events.</h3>
            <p class="text-muted">Check back soon for new events!</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}